<div class="container">
  <header>
    <h1>ğŸ›’ {{ title }}</h1>
    <nav class="header-nav">
      <div class="cart-icon">
        Sepet: {{ cart.length }} Ã¼rÃ¼n
      </div>
      <div class="auth-buttons">
        <ng-container *ngIf="!authService.isLoggedIn()">
          <a routerLink="/login" class="nav-link">GiriÅŸ Yap</a>
          <a routerLink="/register" class="nav-link register-link">KayÄ±t Ol</a>
        </ng-container>
        <ng-container *ngIf="authService.isLoggedIn()">
          <span class="user-welcome">HoÅŸ geldiniz, {{ authService.getCurrentUser()?.username }}!</span>
          <button (click)="authService.logout()" class="logout-btn">Ã‡Ä±kÄ±ÅŸ</button>
        </ng-container>
      </div>
    </nav>
  </header>

  <router-outlet></router-outlet>

  <main>
    <section class="products">
      <h2>ÃœrÃ¼nler</h2>
      <div class="product-grid">
        <div class="product-card" *ngFor="let product of products">
          <div class="product-image">{{ product.image }}</div>
          <h3>{{ product.name }}</h3>
          <p>{{ product.description }}</p>
          <div class="product-footer">
            <span class="price">{{ product.price }} â‚º</span>
            <button (click)="addToCart(product)">Sepete Ekle</button>
          </div>
        </div>
      </div>
    </section>

    <section class="cart" *ngIf="cart.length > 0">
      <h2>AlÄ±ÅŸveriÅŸ Sepetim</h2>
      <div class="cart-items">
        <div class="cart-item" *ngFor="let item of cart; let i = index">
          <span>{{ item.image }} {{ item.name }}</span>
          <span>{{ item.price }} â‚º</span>
          <button (click)="removeFromCart(i)" class="remove-btn">Sil</button>
        </div>
      </div>
      <div class="cart-total">
        <strong>Toplam: {{ getTotalPrice() }} â‚º</strong>
      </div>
    </section>

    <!-- Push Notification GÃ¶nderme BÃ¶lÃ¼mÃ¼ -->
<div class="notification-section">
  <h2>ğŸ“± Push Bildirim GÃ¶nder</h2>

  <div class="notification-form">
    <div class="form-group">
      <label for="deviceToken">Device Token:</label>
      <input
        type="text"
        id="deviceToken"
        [(ngModel)]="deviceToken"
        placeholder="iOS Device Token giriniz"
        class="form-input"
      />
    </div>

    <div class="form-group">
      <label for="title">Bildirim BaÅŸlÄ±ÄŸÄ±:</label>
      <input
        type="text"
        id="title"
        [(ngModel)]="notificationTitle"
        placeholder="Ã–rn: Yeni Kampanya"
        class="form-input"
      />
    </div>

    <div class="form-group">
      <label for="body">Bildirim Ä°Ã§eriÄŸi:</label>
      <textarea
        id="body"
        [(ngModel)]="notificationBody"
        placeholder="Ã–rn: %50 indirim fÄ±rsatÄ±nÄ± kaÃ§Ä±rmayÄ±n!"
        rows="3"
        class="form-input"
      ></textarea>
    </div>

    <button
      (click)="sendPushNotification()"
      [disabled]="isSendingNotification"
      class="send-btn"
    >
      {{ isSendingNotification ? 'â³ GÃ¶nderiliyor...' : 'ğŸ“¤ Bildirim GÃ¶nder' }}
    </button>

    <div *ngIf="notificationMessage" [class]="notificationMessage.includes('âœ…') ? 'success-message' : 'error-message'">
      {{ notificationMessage }}
    </div>
  </div>
</div>
  </main>
</div>
